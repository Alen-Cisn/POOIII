@page "/login"
@inject IHttpClientFactory HttpFactory

<PageTitle>Login</PageTitle>

<h1>Login</h1>

<p role="status">Pleas, enter credentials</p>
<form @onsubmit="LoginSubmit">
    <div class="form-group">
        <label for="email">Email address</label>
        <input type="email" class="form-control" id="email" placeholder="Enter email" required @bind="email"
            @bind:event="oninput">
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" class="form-control" id="password" placeholder="Password" required @bind="password"
            @bind:event="oninput">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

@code {
    private string email = "";
    private string password = "";

    private async Task LoginSubmit()
    {
        var Http = HttpFactory.CreateClient("Public.Txt.Api");
        var response = await Http.PostAsJsonAsync("/authorization/login", new
        {
            email = email,
            password = password,
        });

        Console.WriteLine(response.Content);
    }
}
